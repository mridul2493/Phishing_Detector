<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Phishing Email Detector</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --bg: #0f1724;
      --panel: #0b1220;
      --muted: #9aa7bd;
      --accent: #06b6d4;
      --accent2: #7c3aed;
      --success: #16a34a;
      --warn: #f59e0b;
      --danger: #ef4444;
      --glass: rgba(255,255,255,0.03);
      --radius: 10px;
      --pad: 12px;
      --shadow: 0 6px 20px rgba(2,6,23,0.6);
      font-family: Inter, "Segoe UI", Roboto, Arial, sans-serif;
    }

    html, body {
      margin: 0;
      padding: 10px;
      width: 420px;
      background: linear-gradient(180deg, #071029 0%, #071a2a 100%);
      color: #e6eef6;
      -webkit-font-smoothing: antialiased;
    }

    .wrap {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    header {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo {
      width:50px;
      height:50px;
      border-radius: 10px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow: var(--shadow);
      flex: 0 0 50px;
    }
    .logo svg { filter: drop-shadow(0 6px 14px rgba(0,0,0,0.5)); }

    .title-block {
      display:flex;
      flex-direction:column;
      gap:2px;
    }
    h1 {
      font-size:16px;
      margin:0;
      font-weight:700;
      letter-spacing: -0.2px;
    }
    .subtitle {
      font-size:11.5px;
      color: var(--muted);
      margin:0;
    }

    .controls {
      margin-left: auto;
      display:flex;
      gap:8px;
      align-items:center;
    }

    button#fetchEmails {
      background: linear-gradient(90deg,var(--accent),var(--accent2));
      color: #041122;
      padding: 9px 14px;
      border: none;
      border-radius: 8px;
      font-weight:700;
      cursor: pointer;
      box-shadow: 0 8px 20px rgba(3,10,24,0.6);
      transition: transform .08s ease, box-shadow .12s ease, opacity .12s;
      min-width: 140px;
    }
    button#fetchEmails:active { transform: translateY(1px); }
    button#fetchEmails[disabled] { opacity: 0.7; cursor: default; }

    .panel {
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius: var(--radius);
      padding: 10px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.02);
      border: 1px solid rgba(255,255,255,0.03);
      max-height: 480px;
      overflow: auto;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace;
      font-size: 13px;
      color: #e6eef6;
      line-height: 1.35;
      white-space: pre-wrap; /* keep popup.js formatting */
      word-break: break-word;
    }

    .meta {
      display:flex;
      gap:8px;
      align-items:center;
      font-size:12px;
      color:var(--muted);
    }

    .badges {
      display:flex;
      gap:6px;
      align-items:center;
    }

    .badge {
      padding:4px 8px;
      border-radius: 8px;
      font-weight:700;
      font-size:12px;
    }
    .safe { background:#dff3ea; color:var(--success); }
    .suspicious { background:#fff3cd; color:var(--warn); }
    .phishing { background:#fde2e2; color:var(--danger); }

    footer {
      display:flex;
      justify-content:space-between;
      align-items:center;
      color:var(--muted);
      font-size:12px;
    }

    a.small { color: var(--accent); text-decoration:none; font-weight:700; }
    a.small:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo" aria-hidden="true">
        <!-- shield + mail icon -->
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 1L4 4v5c0 5 3.6 9.5 8 11 4.4-1.5 8-6 8-11V4l-8-3z" fill="white" opacity="0.12"/>
          <path d="M8 9.5L12 12l4-2.5" stroke="white" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M12 22v-9" stroke="white" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>

      <div class="title-block">
        <h1>Phishing Email Detector</h1>
        <div class="subtitle">Scan emails & attachments — multilanguage support</div>
      </div>

      <div class="controls">
        <div class="meta small">Local demo — Gmail read-only</div>
        <button id="fetchEmails" title="Fetch & Analyze Emails">Analyze Emails</button>
      </div>
    </header>

    <div class="panel" role="region" aria-live="polite" aria-label="Analysis output">
      <!-- KEEP id="output" as your JS writes textContent to it -->
      <pre id="output">Click "Analyze Emails" to start. Results will appear here.</pre>
    </div>

    <footer>
      <div class="small">Demo • Keep server running (http://localhost:5000)</div>
      <div><a class="small" id="docs" href="#" title="Open docs">Docs</a></div>
    </footer>
  </div>

  <script>
    // Non-invasive helpers: don't alter DOM elements JS expects (#fetchEmails, #output)
    document.getElementById('docs').addEventListener('click', (e) => {
      e.preventDefault();
      try { chrome.tabs.create({ url: 'https://developers.google.com/gmail/api' }); }
      catch (err) { window.open('https://developers.google.com/gmail/api', '_blank'); }
    });
  </script>

  <!-- keep this exact path so your popup.js continues to work -->
  <script src="popup.js"></script>
</body>
</html>